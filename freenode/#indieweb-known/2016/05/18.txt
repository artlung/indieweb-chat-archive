2016-05-18 04:23:26.119000 {"type":"join","timestamp":"1463545406.119000","network":"irc","server":"freenode","channel":{"id":"#knownchat","name":"#knownchat"},"author":{"uid":"tantek","nickname":"tantek","name":"tantek","username":null},"content":"tantek joined #knownchat"}
2016-05-18 04:46:41.121000 {"type":"join","timestamp":"1463546801.121000","network":"irc","server":"freenode","channel":{"id":"#knownchat","name":"#knownchat"},"author":{"uid":"tantek","nickname":"tantek","name":"tantek","username":null},"content":"tantek joined #knownchat"}
2016-05-18 04:53:37.182000 {"type":"join","timestamp":"1463547217.182000","network":"irc","server":"freenode","channel":{"id":"#knownchat","name":"#knownchat"},"author":{"uid":"tantek","nickname":"tantek","name":"tantek","username":null},"content":"tantek joined #knownchat"}
2016-05-18 05:02:38.917000 {"type":"join","timestamp":"1463547758.917000","network":"irc","server":"freenode","channel":{"id":"#knownchat","name":"#knownchat"},"author":{"uid":"tantek","nickname":"tantek","name":"tantek","username":null},"content":"tantek joined #knownchat"}
2016-05-18 05:04:59.229000 {"type":"join","timestamp":"1463547899.229000","network":"irc","server":"freenode","channel":{"id":"#knownchat","name":"#knownchat"},"author":{"uid":"j12t_","nickname":"j12t_","name":"j12t_","username":null},"content":"j12t_ joined #knownchat"}
2016-05-18 05:25:01.805000 {"type":"join","timestamp":"1463549101.805000","network":"irc","server":"freenode","channel":{"id":"#knownchat","name":"#knownchat"},"author":{"uid":"benwerd","nickname":"benwerd","name":"benwerd","username":null},"content":"benwerd joined #knownchat"}
2016-05-18 05:30:56.041000 {"type":"join","timestamp":"1463549456.041000","network":"irc","server":"freenode","channel":{"id":"#knownchat","name":"#knownchat"},"author":{"uid":"benwerd","nickname":"benwerd","name":"benwerd","username":null},"content":"benwerd joined #knownchat"}
2016-05-18 05:42:27.098000 {"type":"join","timestamp":"1463550147.098000","network":"irc","server":"freenode","channel":{"id":"#knownchat","name":"#knownchat"},"author":{"uid":"benwerd","nickname":"benwerd","name":"benwerd","username":null},"content":"benwerd joined #knownchat"}
2016-05-18 07:24:56.332000 {"type":"join","timestamp":"1463556296.332000","network":"irc","server":"freenode","channel":{"id":"#knownchat","name":"#knownchat"},"author":{"uid":"loic_m","nickname":"loic_m","name":"loic_m","username":null},"content":"loic_m joined #knownchat"}
2016-05-18 08:16:27.643000 {"type":"join","timestamp":"1463559387.643000","network":"irc","server":"freenode","channel":{"id":"#knownchat","name":"#knownchat"},"author":{"uid":"j12t","nickname":"j12t","name":"j12t","username":null},"content":"j12t joined #knownchat"}
2016-05-18 08:27:41.259000 {"type":"join","timestamp":"1463560061.259000","network":"irc","server":"freenode","channel":{"id":"#knownchat","name":"#knownchat"},"author":{"uid":"mapkyca","nickname":"mapkyca","name":"mapkyca","username":null},"content":"mapkyca joined #knownchat"}
2016-05-18 08:44:57.133000 {"type":"join","timestamp":"1463561097.133000","network":"irc","server":"freenode","channel":{"id":"#knownchat","name":"#knownchat"},"author":{"uid":"mattl__","nickname":"mattl__","name":"mattl__","username":null},"content":"mattl__ joined #knownchat"}
2016-05-18 08:47:04.991000 {"type":"join","timestamp":"1463561224.991000","network":"irc","server":"freenode","channel":{"id":"#knownchat","name":"#knownchat"},"author":{"uid":"cleverdevil","nickname":"cleverdevil","name":"cleverdevil","username":null},"content":"cleverdevil joined #knownchat"}
2016-05-18 08:48:25.292000 {"type":"join","timestamp":"1463561305.292000","network":"irc","server":"freenode","channel":{"id":"#knownchat","name":"#knownchat"},"author":{"uid":"KevinMarks","nickname":"KevinMarks","name":"KevinMarks","username":null},"content":"KevinMarks joined #knownchat"}
2016-05-18 08:52:00.967000 {"type":"join","timestamp":"1463561520.967000","network":"irc","server":"freenode","channel":{"id":"#knownchat","name":"#knownchat"},"author":{"uid":"mapkyca","nickname":"mapkyca","name":"mapkyca","username":null},"content":"mapkyca joined #knownchat"}
2016-05-18 08:53:03.566000 {"type":"join","timestamp":"1463561583.566000","network":"irc","server":"freenode","channel":{"id":"#knownchat","name":"#knownchat"},"author":{"uid":"j12t","nickname":"j12t","name":"j12t","username":null},"content":"j12t joined #knownchat"}
2016-05-18 09:36:53.145000 {"type":"join","timestamp":"1463564213.145000","network":"irc","server":"freenode","channel":{"id":"#knownchat","name":"#knownchat"},"author":{"uid":"j12t","nickname":"j12t","name":"j12t","username":null},"content":"j12t joined #knownchat"}
2016-05-18 10:16:24.826000 {"type":"join","timestamp":"1463566584.826000","network":"irc","server":"freenode","channel":{"id":"#knownchat","name":"#knownchat"},"author":{"uid":"j12t","nickname":"j12t","name":"j12t","username":null},"content":"j12t joined #knownchat"}
2016-05-18 10:56:33.498000 {"type":"join","timestamp":"1463568993.498000","network":"irc","server":"freenode","channel":{"id":"#knownchat","name":"#knownchat"},"author":{"uid":"j12t","nickname":"j12t","name":"j12t","username":null},"content":"j12t joined #knownchat"}
2016-05-18 11:38:09.740000 {"type":"join","timestamp":"1463571489.740000","network":"irc","server":"freenode","channel":{"id":"#knownchat","name":"#knownchat"},"author":{"uid":"j12t","nickname":"j12t","name":"j12t","username":null},"content":"j12t joined #knownchat"}
2016-05-18 11:38:52.845000 {"type":"join","timestamp":"1463571532.845000","network":"irc","server":"freenode","channel":{"id":"#knownchat","name":"#knownchat"},"author":{"uid":"ben_thatmustbeme","nickname":"ben_thatmustbeme","name":"ben_thatmustbeme","username":null},"content":"ben_thatmustbeme joined #knownchat"}
2016-05-18 12:19:27.776000 {"type":"join","timestamp":"1463573967.776000","network":"irc","server":"freenode","channel":{"id":"#knownchat","name":"#knownchat"},"author":{"uid":"j12t","nickname":"j12t","name":"j12t","username":null},"content":"j12t joined #knownchat"}
2016-05-18 12:20:09.753000 {"type":"join","timestamp":"1463574009.753000","network":"irc","server":"freenode","channel":{"id":"#knownchat","name":"#knownchat"},"author":{"uid":"tantek","nickname":"tantek","name":"tantek","username":null},"content":"tantek joined #knownchat"}
2016-05-18 13:01:51.036000 {"type":"join","timestamp":"1463576511.036000","network":"irc","server":"freenode","channel":{"id":"#knownchat","name":"#knownchat"},"author":{"uid":"j12t","nickname":"j12t","name":"j12t","username":null},"content":"j12t joined #knownchat"}
2016-05-18 13:09:07.572000 {"type":"message","timestamp":"1463576947.572000","network":"irc","server":"freenode","channel":{"id":"#knownchat","name":"#knownchat"},"author":{"uid":"mapkyca","nickname":"mapkyca","name":"mapkyca","username":null},"content":"@kylewm Just trying to debug export. It seems because getRecords() now returns a MappingIterator, it's not possible to simply test $results to see if it's finished (at least on mongo). Is there any reliable way to tell whether getRecords has finished?"}
2016-05-18 13:09:26.702000 {"type":"message","timestamp":"1463576966.702000","network":"irc","server":"freenode","channel":{"id":"#knownchat","name":"#knownchat"},"author":{"uid":"mapkyca","nickname":"mapkyca","name":"mapkyca","username":null},"content":"I'm not entirely sure whether getRecords _should_ be returning a MappingIterator"}
2016-05-18 13:45:04.727000 {"type":"join","timestamp":"1463579104.727000","network":"irc","server":"freenode","channel":{"id":"#knownchat","name":"#knownchat"},"author":{"uid":"j12t","nickname":"j12t","name":"j12t","username":null},"content":"j12t joined #knownchat"}
2016-05-18 14:04:13.850000 {"type":"join","timestamp":"1463580253.850000","network":"irc","server":"freenode","channel":{"id":"#knownchat","name":"#knownchat"},"author":{"uid":"Madgod","nickname":"Madgod","name":"Madgod","username":null},"content":"Madgod joined #knownchat"}
2016-05-18 14:28:24.233000 {"type":"join","timestamp":"1463581704.233000","network":"irc","server":"freenode","channel":{"id":"#knownchat","name":"#knownchat"},"author":{"uid":"j12t","nickname":"j12t","name":"j12t","username":null},"content":"j12t joined #knownchat"}
2016-05-18 14:32:11.358000 {"type":"join","timestamp":"1463581931.358000","network":"irc","server":"freenode","channel":{"id":"#knownchat","name":"#knownchat"},"author":{"uid":"cleverdevil","nickname":"cleverdevil","name":"cleverdevil","username":null},"content":"cleverdevil joined #knownchat"}
2016-05-18 14:57:01.051000 {"type":"message","timestamp":"1463583421.051000","network":"irc","server":"freenode","channel":{"id":"#knownchat","name":"#knownchat"},"author":{"uid":"kylewm","nickname":"kylewm","name":"kylewm","username":null},"content":"mapkyca: where is it having trouble telling whether getRecords is finished? the mappingiterator is supposed to terminate when the cursor from Mongo terminates"}
2016-05-18 14:59:18.390000 {"type":"message","timestamp":"1463583558.390000","network":"irc","server":"freenode","channel":{"id":"#knownchat","name":"#knownchat"},"author":{"uid":"kylewm","nickname":"kylewm","name":"kylewm","username":null},"content":"I don't think it was strictly necessary to add MappingIterator. iirc, the result cursor is always realized into an array right away by the caller. but I added it because I didn't want to enforce that behavior in case someone in the future wants to grab only the first few results"}
2016-05-18 15:01:31.614000 {"type":"join","timestamp":"1463583691.614000","network":"irc","server":"freenode","channel":{"id":"#knownchat","name":"#knownchat"},"author":{"uid":"KevinMarks","nickname":"KevinMarks","name":"KevinMarks","username":null},"content":"KevinMarks joined #knownchat"}
2016-05-18 15:10:49.353000 {"type":"message","timestamp":"1463584249.353000","network":"irc","server":"freenode","channel":{"id":"#knownchat","name":"#knownchat"},"author":{"uid":"mapkyca","nickname":"mapkyca","name":"mapkyca","username":null},"content":"yeah, I found the problem - patch sent. Basically mongo always returns a MongoCursor, so it wasn't possible to safely do a while ($results = ...->getRecords())"}
2016-05-18 15:11:18.588000 {"type":"message","timestamp":"1463584278.588000","network":"irc","server":"freenode","channel":{"id":"#knownchat","name":"#knownchat"},"author":{"uid":"mapkyca","nickname":"mapkyca","name":"mapkyca","username":null},"content":"one of the many examples of where mongo behaves differently to SQL based data stores"}
2016-05-18 15:11:39.712000 {"type":"message","timestamp":"1463584299.712000","network":"irc","server":"freenode","channel":{"id":"#knownchat","name":"#knownchat"},"author":{"uid":"mapkyca","nickname":"mapkyca","name":"mapkyca","username":null},"content":"I've fudged it for now, but wasn't going to spend too much time on it since we're going to kill mongo eventually"}
2016-05-18 15:32:25.943000 {"type":"join","timestamp":"1463585545.943000","network":"irc","server":"freenode","channel":{"id":"#knownchat","name":"#knownchat"},"author":{"uid":"tantek","nickname":"tantek","name":"tantek","username":null},"content":"tantek joined #knownchat"}
2016-05-18 15:52:38.367000 {"type":"join","timestamp":"1463586758.367000","network":"irc","server":"freenode","channel":{"id":"#knownchat","name":"#knownchat"},"author":{"uid":"j12t","nickname":"j12t","name":"j12t","username":null},"content":"j12t joined #knownchat"}
2016-05-18 15:55:05.756000 {"type":"message","timestamp":"1463586905.756000","network":"irc","server":"freenode","channel":{"id":"#knownchat","name":"#knownchat"},"author":{"uid":"kylewm","nickname":"kylewm","name":"kylewm","username":null},"content":"Excellent"}
2016-05-18 16:41:39.123000 {"type":"join","timestamp":"1463589699.123000","network":"irc","server":"freenode","channel":{"id":"#knownchat","name":"#knownchat"},"author":{"uid":"KevinMarks","nickname":"KevinMarks","name":"KevinMarks","username":null},"content":"KevinMarks joined #knownchat"}
2016-05-18 20:02:13.054000 {"type":"join","timestamp":"1463601733.054000","network":"irc","server":"freenode","channel":{"id":"#knownchat","name":"#knownchat"},"author":{"uid":"KevinMarks","nickname":"KevinMarks","name":"KevinMarks","username":null},"content":"KevinMarks joined #knownchat"}
2016-05-18 20:40:47.620000 {"type":"join","timestamp":"1463604047.620000","network":"irc","server":"freenode","channel":{"id":"#knownchat","name":"#knownchat"},"author":{"uid":"loic_m","nickname":"loic_m","name":"loic_m","username":null},"content":"loic_m joined #knownchat"}
2016-05-18 21:06:11.292000 {"type":"join","timestamp":"1463605571.292000","network":"irc","server":"freenode","channel":{"id":"#knownchat","name":"#knownchat"},"author":{"uid":"tantek","nickname":"tantek","name":"tantek","username":null},"content":"tantek joined #knownchat"}
