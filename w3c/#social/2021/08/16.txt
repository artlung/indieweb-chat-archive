2021-08-16 14:11:51.426200 {"type":"join","timestamp":1629123111.4261844,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"timbl","nickname":"timbl","username":"timbl","name":null,"photo":null,"url":null,"tz":null,"host":"7facbc0a.team.cloak"},"content":null,"modes":[]}
2021-08-16 14:57:13.725300 {"type":"join","timestamp":1629125833.725279,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"timbl","nickname":"timbl","username":"timbl","name":null,"photo":null,"url":null,"tz":null,"host":"7facbc0a.team.cloak"},"content":null,"modes":[]}
2021-08-16 21:27:41.216400 {"type":"message","timestamp":1629149261.2164085,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"heluecht[m]","nickname":"heluecht[m]","username":"~heluechtfe","name":"@heluecht:feneas.org","photo":null,"url":null,"tz":null,"host":"8604d15a.public.cloak"},"content":"Is someone here who does know a bit about the web push api and how it is implemented in Mastodon? I would like to know what payload is transmitted because I'm currently trying to implement it in Friendica.","modes":[]}
2021-08-16 21:30:30.795700 {"type":"message","timestamp":1629149430.7957,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"nightpool[m]","nickname":"nightpool[m]","username":"~nightpoolc","name":"@nightpool:cybre.space","photo":null,"url":null,"tz":null,"host":"8604d15a.public.cloak"},"content":"I think we ripped out Web Push a while ago, sorry","modes":[]}
2021-08-16 21:30:46.208800 {"type":"message","timestamp":1629149446.208762,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"nightpool[m]","nickname":"nightpool[m]","username":"~nightpoolc","name":"@nightpool:cybre.space","photo":null,"url":null,"tz":null,"host":"8604d15a.public.cloak"},"content":"oh you mean push notifications","modes":[]}
2021-08-16 21:30:50.412100 {"type":"message","timestamp":1629149450.4120548,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"nightpool[m]","nickname":"nightpool[m]","username":"~nightpoolc","name":"@nightpool:cybre.space","photo":null,"url":null,"tz":null,"host":"8604d15a.public.cloak"},"content":"yes, I can speak to that","modes":[]}
2021-08-16 21:31:09.328700 {"type":"message","timestamp":1629149469.328723,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"nightpool[m]","nickname":"nightpool[m]","username":"~nightpoolc","name":"@nightpool:cybre.space","photo":null,"url":null,"tz":null,"host":"8604d15a.public.cloak"},"content":"I thought you were asking about the spec that evolved out of Pubsubhubbub","modes":[]}
2021-08-16 21:31:56.982100 {"type":"message","timestamp":1629149516.982144,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"nightpool[m]","nickname":"nightpool[m]","username":"~nightpoolc","name":"@nightpool:cybre.space","photo":null,"url":null,"tz":null,"host":"8604d15a.public.cloak"},"content":"* ~~I think we ripped out Web Push a while ago, sorry~~","modes":[]}
2021-08-16 21:32:06.791500 {"type":"message","timestamp":1629149526.7914524,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"nightpool[m]","nickname":"nightpool[m]","username":"~nightpoolc","name":"@nightpool:cybre.space","photo":null,"url":null,"tz":null,"host":"8604d15a.public.cloak"},"content":"* ~~I think we ripped out Web Push a while ago, sorry~~","modes":[]}
2021-08-16 21:33:21.774300 {"type":"message","timestamp":1629149601.7743018,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"heluecht[m]","nickname":"heluecht[m]","username":"~heluechtfe","name":"@heluecht:feneas.org","photo":null,"url":null,"tz":null,"host":"8604d15a.public.cloak"},"content":"I mean this one: https:\/\/docs.joinmastodon.org\/methods\/notifications\/push\/","modes":[]}
2021-08-16 21:33:45.606000 {"type":"message","timestamp":1629149625.605966,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"nightpool[m]","nickname":"nightpool[m]","username":"~nightpoolc","name":"@nightpool:cybre.space","photo":null,"url":null,"tz":null,"host":"8604d15a.public.cloak"},"content":"yep, yep, I'm on the right page now","modes":[]}
2021-08-16 21:34:03.123800 {"type":"message","timestamp":1629149643.1237884,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"nightpool[m]","nickname":"nightpool[m]","username":"~nightpoolc","name":"@nightpool:cybre.space","photo":null,"url":null,"tz":null,"host":"8604d15a.public.cloak"},"content":"just got websub and webpush confused for a moment :p","modes":[]}
2021-08-16 21:34:19.935900 {"type":"message","timestamp":1629149659.9358857,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"heluecht[m]","nickname":"heluecht[m]","username":"~heluechtfe","name":"@heluecht:feneas.org","photo":null,"url":null,"tz":null,"host":"8604d15a.public.cloak"},"content":"I haven't found a documentation about the content of the notification.","modes":[]}
2021-08-16 21:35:30.007500 {"type":"message","timestamp":1629149730.0074809,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"nightpool[m]","nickname":"nightpool[m]","username":"~nightpoolc","name":"@nightpool:cybre.space","photo":null,"url":null,"tz":null,"host":"8604d15a.public.cloak"},"content":"hmm, not sure off hand. it's probably similar to the streaming API payload. is this for mastodon API compatibility?","modes":[]}
2021-08-16 21:39:27.559800 {"type":"message","timestamp":1629149967.5597796,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"nightpool[m]","nickname":"nightpool[m]","username":"~nightpoolc","name":"@nightpool:cybre.space","photo":null,"url":null,"tz":null,"host":"8604d15a.public.cloak"},"content":"heluecht: here's the serializer: https:\/\/github.com\/mastodon\/mastodon\/blob\/master\/app\/serializers\/web\/notification_serializer.rb","modes":[]}
2021-08-16 21:40:29.930200 {"type":"message","timestamp":1629150029.9302108,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"heluecht[m]","nickname":"heluecht[m]","username":"~heluechtfe","name":"@heluecht:feneas.org","photo":null,"url":null,"tz":null,"host":"8604d15a.public.cloak"},"content":"Yeah. Some apps are querying that part of the API, so we should implement it as well.","modes":[]}
2021-08-16 21:42:28.354900 {"type":"message","timestamp":1629150148.3548877,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"nightpool[m]","nickname":"nightpool[m]","username":"~nightpoolc","name":"@nightpool:cybre.space","photo":null,"url":null,"tz":null,"host":"8604d15a.public.cloak"},"content":"the payload is very simple, it contains only enough information needed to display the preview of the notification to the user, everything else needs to be fetched from the API.","modes":[]}
2021-08-16 21:44:14.180300 {"type":"message","timestamp":1629150254.180312,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"heluecht[m]","nickname":"heluecht[m]","username":"~heluechtfe","name":"@heluecht:feneas.org","photo":null,"url":null,"tz":null,"host":"8604d15a.public.cloak"},"content":"So is the stuff with \"def\" the payload variables?","modes":[]}
2021-08-16 21:44:28.886600 {"type":"message","timestamp":1629150268.8865604,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"nightpool[m]","nickname":"nightpool[m]","username":"~nightpoolc","name":"@nightpool:cybre.space","photo":null,"url":null,"tz":null,"host":"8604d15a.public.cloak"},"content":"ah, yes, the variables are `:access_token, :preferred_locale, :notification_id, :notification_type, :icon, :title, :body`","modes":[]}
2021-08-16 21:44:40.099200 {"type":"message","timestamp":1629150280.099185,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"nightpool[m]","nickname":"nightpool[m]","username":"~nightpoolc","name":"@nightpool:cybre.space","photo":null,"url":null,"tz":null,"host":"8604d15a.public.cloak"},"content":"and the `def` is the function definition for each one","modes":[]}
2021-08-16 21:48:11.005300 {"type":"message","timestamp":1629150491.005289,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"heluecht[m]","nickname":"heluecht[m]","username":"~heluechtfe","name":"@heluecht:feneas.org","photo":null,"url":null,"tz":null,"host":"8604d15a.public.cloak"},"content":"Are there samples in the code explaining the content? Some like the notification_id and the notification_type are clear. The icon could be a general icon for the application. But what is the access_token? Is this the token from the associated application?","modes":[]}
2021-08-16 21:49:27.388700 {"type":"message","timestamp":1629150567.3886743,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"nightpool[m]","nickname":"nightpool[m]","username":"~nightpoolc","name":"@nightpool:cybre.space","photo":null,"url":null,"tz":null,"host":"8604d15a.public.cloak"},"content":"the icon is the icon of the user the notification is associated with. So for example if you like my post, when I get a notification for that like, it'll be your icon","modes":[]}
2021-08-16 21:49:39.999400 {"type":"message","timestamp":1629150579.999394,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"nightpool[m]","nickname":"nightpool[m]","username":"~nightpoolc","name":"@nightpool:cybre.space","photo":null,"url":null,"tz":null,"host":"8604d15a.public.cloak"},"content":"but ultimately it's very thin-client, the app will just display whatever you send it","modes":[]}
2021-08-16 21:50:45.866300 {"type":"message","timestamp":1629150645.866317,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"nightpool[m]","nickname":"nightpool[m]","username":"~nightpoolc","name":"@nightpool:cybre.space","photo":null,"url":null,"tz":null,"host":"8604d15a.public.cloak"},"content":"the access_token is created when setting up the push notification, it's part of the payload returned. I assume so that apps can associate the right push notifications with the right users?","modes":[]}
2021-08-16 21:50:57.080600 {"type":"message","timestamp":1629150657.0806208,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"heluecht[m]","nickname":"heluecht[m]","username":"~heluechtfe","name":"@heluecht:feneas.org","photo":null,"url":null,"tz":null,"host":"8604d15a.public.cloak"},"content":"\"Subway Tooter\" doesn't seem to care about the payload at all. It doesn't matter what I send, it will always pull the notifications directly afterwars.","modes":[]}
2021-08-16 21:51:23.006500 {"type":"message","timestamp":1629150683.006524,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"heluecht[m]","nickname":"heluecht[m]","username":"~heluechtfe","name":"@heluecht:feneas.org","photo":null,"url":null,"tz":null,"host":"8604d15a.public.cloak"},"content":"Ah okay.","modes":[]}
2021-08-16 21:53:24.929400 {"type":"message","timestamp":1629150804.9294374,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"nightpool[m]","nickname":"nightpool[m]","username":"~nightpoolc","name":"@nightpool:cybre.space","photo":null,"url":null,"tz":null,"host":"8604d15a.public.cloak"},"content":"ah, sorry, i was slightly wrong about that\u2014the `access_token` is just the normal access_token for the app\/user combination","modes":[]}
2021-08-16 21:53:42.446700 {"type":"message","timestamp":1629150822.4466767,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"heluecht[m]","nickname":"heluecht[m]","username":"~heluechtfe","name":"@heluecht:feneas.org","photo":null,"url":null,"tz":null,"host":"8604d15a.public.cloak"},"content":"Ah, great. I was slightly confused.","modes":[]}
2021-08-16 21:54:40.601000 {"type":"message","timestamp":1629150880.6010134,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"heluecht[m]","nickname":"heluecht[m]","username":"~heluechtfe","name":"@heluecht:feneas.org","photo":null,"url":null,"tz":null,"host":"8604d15a.public.cloak"},"content":"And \"title\" and \"body\" would be some \"you have been mentioned by xzy\" or more the real body of the message?","modes":[]}
2021-08-16 21:55:17.036200 {"type":"message","timestamp":1629150917.0362086,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"nightpool[m]","nickname":"nightpool[m]","username":"~nightpoolc","name":"@nightpool:cybre.space","photo":null,"url":null,"tz":null,"host":"8604d15a.public.cloak"},"content":"title would be \"you have been mentioned by xyz\" and body would be a truncated version of the real body of the message","modes":[]}
2021-08-16 21:55:35.255300 {"type":"message","timestamp":1629150935.2552898,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"nightpool[m]","nickname":"nightpool[m]","username":"~nightpoolc","name":"@nightpool:cybre.space","photo":null,"url":null,"tz":null,"host":"8604d15a.public.cloak"},"content":"we truncate to 140 characters, most push servers have very strict payload size limits","modes":[]}
2021-08-16 21:55:40.862400 {"type":"message","timestamp":1629150940.8623662,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"nightpool[m]","nickname":"nightpool[m]","username":"~nightpoolc","name":"@nightpool:cybre.space","photo":null,"url":null,"tz":null,"host":"8604d15a.public.cloak"},"content":" * we truncate to 140 characters (with ...), most push servers have very strict payload size limits","modes":[]}
2021-08-16 21:55:50.669700 {"type":"message","timestamp":1629150950.6697147,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"nightpool[m]","nickname":"nightpool[m]","username":"~nightpoolc","name":"@nightpool:cybre.space","photo":null,"url":null,"tz":null,"host":"8604d15a.public.cloak"},"content":" * we truncate to 140 characters (with \"...\" at the end), most push servers have very strict payload size limits","modes":[]}
2021-08-16 21:56:03.289800 {"type":"message","timestamp":1629150963.2898238,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"heluecht[m]","nickname":"heluecht[m]","username":"~heluechtfe","name":"@heluecht:feneas.org","photo":null,"url":null,"tz":null,"host":"8604d15a.public.cloak"},"content":"Ah okay.","modes":[]}
2021-08-16 21:57:14.772600 {"type":"message","timestamp":1629151034.77257,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"heluecht[m]","nickname":"heluecht[m]","username":"~heluechtfe","name":"@heluecht:feneas.org","photo":null,"url":null,"tz":null,"host":"8604d15a.public.cloak"},"content":"And I guess that \"preferred_locale\" will be some normal \"de_de\" or \"en_us\" stuff?","modes":[]}
2021-08-16 21:57:45.602500 {"type":"message","timestamp":1629151065.6025333,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"nightpool[m]","nickname":"nightpool[m]","username":"~nightpoolc","name":"@nightpool:cybre.space","photo":null,"url":null,"tz":null,"host":"8604d15a.public.cloak"},"content":"yep. I believe you can set a preferred locale when setting up the subscription.","modes":[]}
2021-08-16 21:58:17.835100 {"type":"message","timestamp":1629151097.8350723,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"nightpool[m]","nickname":"nightpool[m]","username":"~nightpoolc","name":"@nightpool:cybre.space","photo":null,"url":null,"tz":null,"host":"8604d15a.public.cloak"},"content":"ah, no, it just uses the locale from the user","modes":[]}
2021-08-16 21:58:57.779100 {"type":"message","timestamp":1629151137.779062,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"heluecht[m]","nickname":"heluecht[m]","username":"~heluechtfe","name":"@heluecht:feneas.org","photo":null,"url":null,"tz":null,"host":"8604d15a.public.cloak"},"content":"And I guess that - like always with Mastodon - the \"id\" value is encoded as a string?","modes":[]}
2021-08-16 21:59:59.445400 {"type":"message","timestamp":1629151199.4453611,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"nightpool[m]","nickname":"nightpool[m]","username":"~nightpoolc","name":"@nightpool:cybre.space","photo":null,"url":null,"tz":null,"host":"8604d15a.public.cloak"},"content":"hmm, i don't think so. that's only for snowflake IDs","modes":[]}
2021-08-16 22:00:28.875700 {"type":"message","timestamp":1629151228.8757,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"heluecht[m]","nickname":"heluecht[m]","username":"~heluechtfe","name":"@heluecht:feneas.org","photo":null,"url":null,"tz":null,"host":"8604d15a.public.cloak"},"content":"\"snowflake ID\"?","modes":[]}
2021-08-16 22:00:41.483900 {"type":"message","timestamp":1629151241.483931,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"nightpool[m]","nickname":"nightpool[m]","username":"~nightpoolc","name":"@nightpool:cybre.space","photo":null,"url":null,"tz":null,"host":"8604d15a.public.cloak"},"content":"IDs that are based on a timestamp, instead of an incrementing counter.","modes":[]}
2021-08-16 22:00:57.277400 {"type":"leave","timestamp":1629151257.2774284,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"epilys","nickname":"epilys","username":"~epilys","name":null,"photo":null,"url":null,"tz":null,"host":"8604d15a.public.cloak"},"content":null,"modes":[]}
2021-08-16 22:00:58.997400 {"type":"message","timestamp":1629151258.9973676,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"nightpool[m]","nickname":"nightpool[m]","username":"~nightpoolc","name":"@nightpool:cybre.space","photo":null,"url":null,"tz":null,"host":"8604d15a.public.cloak"},"content":"i.e. status IDs","modes":[]}
2021-08-16 22:01:41.039900 {"type":"message","timestamp":1629151301.0398543,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"heluecht[m]","nickname":"heluecht[m]","username":"~heluechtfe","name":"@heluecht:feneas.org","photo":null,"url":null,"tz":null,"host":"8604d15a.public.cloak"},"content":"In the API all the \"id\" values are transmitted as strings, like the status ids.","modes":[]}
2021-08-16 22:02:11.169700 {"type":"message","timestamp":1629151331.1696742,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"nightpool[m]","nickname":"nightpool[m]","username":"~nightpoolc","name":"@nightpool:cybre.space","photo":null,"url":null,"tz":null,"host":"8604d15a.public.cloak"},"content":"hmm, i thought it was only status and account IDs","modes":[]}
2021-08-16 22:02:18.876200 {"type":"message","timestamp":1629151338.8761773,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"nightpool[m]","nickname":"nightpool[m]","username":"~nightpoolc","name":"@nightpool:cybre.space","photo":null,"url":null,"tz":null,"host":"8604d15a.public.cloak"},"content":"i could definitely be wrong though","modes":[]}
2021-08-16 22:05:01.444000 {"type":"message","timestamp":1629151501.4440317,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"heluecht[m]","nickname":"heluecht[m]","username":"~heluechtfe","name":"@heluecht:feneas.org","photo":null,"url":null,"tz":null,"host":"8604d15a.public.cloak"},"content":"I will try out. If everything else fails I will use my Mastodon test account to receive notifications.","modes":[]}
2021-08-16 22:06:38.856600 {"type":"message","timestamp":1629151598.8566265,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"nightpool[m]","nickname":"nightpool[m]","username":"~nightpoolc","name":"@nightpool:cybre.space","photo":null,"url":null,"tz":null,"host":"8604d15a.public.cloak"},"content":"\/me sent a long message: nightpool[m]_2021-08-16_22:06:38.txt <https:\/\/matrix.cybre.space\/_matrix\/media\/v1\/download\/cybre.space\/rDqqnTZSZKOmRpmnkQlEltXc>","modes":[]}
2021-08-16 22:07:02.684200 {"type":"message","timestamp":1629151622.6842184,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"heluecht[m]","nickname":"heluecht[m]","username":"~heluechtfe","name":"@heluecht:feneas.org","photo":null,"url":null,"tz":null,"host":"8604d15a.public.cloak"},"content":"Thanks very much!","modes":[]}
2021-08-16 22:07:06.182100 {"type":"message","timestamp":1629151626.1821306,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"nightpool[m]","nickname":"nightpool[m]","username":"~nightpoolc","name":"@nightpool:cybre.space","photo":null,"url":null,"tz":null,"host":"8604d15a.public.cloak"},"content":"np!","modes":[]}
2021-08-16 22:07:55.224200 {"type":"message","timestamp":1629151675.224166,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"heluecht[m]","nickname":"heluecht[m]","username":"~heluechtfe","name":"@heluecht:feneas.org","photo":null,"url":null,"tz":null,"host":"8604d15a.public.cloak"},"content":"Let's see if the clients like this better. I had tested several apps and with one exception nobody seemed to like me :-)","modes":[]}
2021-08-16 22:08:09.941600 {"type":"message","timestamp":1629151689.941644,"network":"irc","server":"w3c","channel":{"uid":"#social","name":"#social"},"author":{"uid":"heluecht[m]","nickname":"heluecht[m]","username":"~heluechtfe","name":"@heluecht:feneas.org","photo":null,"url":null,"tz":null,"host":"8604d15a.public.cloak"},"content":"With the right payload it should work out better.","modes":[]}
